#!/usr/bin/env bash
# Utils/check
#
# Galaxy-level OSPM sanity check wrapper.
#
# Usage:
#   bash Utils/check <GalaxyName>

set -euo pipefail

if [ "$#" -ne 1 ]; then
    echo "Usage: bash Utils/check <GalaxyName>"
    exit 1
fi

GALAXY="$1"

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
CHECK_SCRIPT="$ROOT_DIR/OSPM/check_galaxy_model.py"

if [ ! -f "$CHECK_SCRIPT" ]; then
    echo "[ERROR] check_galaxy_model.py not found at:"
    echo "        $CHECK_SCRIPT"
    exit 1
fi

echo "[CHECK] Repo root: $ROOT_DIR"
echo "[CHECK] Galaxy: $GALAXY"
echo

cd "$ROOT_DIR"

# ⬇⬇⬇ THIS IS THE FIX ⬇⬇⬇
PYTHONPATH="$ROOT_DIR" python "$CHECK_SCRIPT" "$GALAXY"
